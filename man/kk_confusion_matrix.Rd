% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/confusion_matrix.R
\name{kk_confusion_matrix}
\alias{kk_confusion_matrix}
\alias{confusion_metrics_ci}
\title{Confusion Matrix Metrics with Confidence Intervals}
\usage{
kk_confusion_matrix(
  x,
  conf = 0.95,
  boot = FALSE,
  B = 5000,
  seed = 1,
  add_0_5_for_lr = TRUE
)

confusion_metrics_ci(
  x,
  conf = 0.95,
  boot = FALSE,
  B = 5000,
  seed = 1,
  add_0_5_for_lr = TRUE
)
}
\arguments{
\item{x}{Input confusion matrix as named vector, list, tibble, or data frame
\itemize{
\item Must contain: TP (true positives), FP (false positives),
FN (false negatives), TN (true negatives)
}}

\item{conf}{Confidence level (default: 0.95)}

\item{boot}{Calculate bootstrap CIs for point estimates (default: FALSE)}

\item{B}{Number of bootstrap replications (default: 5000)}

\item{seed}{Random seed for reproducibility (default: 1)}

\item{add_0_5_for_lr}{Apply Haldane-Anscombe +0.5 correction for zero cells
in likelihood ratios (default: TRUE)}
}
\value{
Tibble with metrics, estimates, lower/upper CIs, CI method, and notes
}
\description{
Computes comprehensive classification metrics with exact
binomial CIs, log-normal CIs for ratios, and optional bootstrap CIs.
}
\details{
Includes 22+ classification metrics:
\itemize{
\item \strong{Binomial CIs:} Sensitivity, Specificity, PPV, NPV, Accuracy, Prevalence
\item \strong{Derived CIs:} FPR, FNR, FDR, FOR
\item \strong{Likelihood Ratios:} LR+, LRâˆ’, DOR (with log-normal CIs)
\item \strong{Point Estimates:} F1, Balanced Accuracy, MCC, Youden's J, etc.
}
}
\examples{
\dontrun{
library(kkstatfun)

# Example 1: Named vector input
cm <- c(tp = 85, fp = 10, fn = 15, tn = 890)
result <- kk_confusion_matrix(cm)
print(result)

# Example 2: Tibble input with label column
library(tibble)
cm_tibble <- tibble(
              label = c("TP", "FP", "FN", "TN"),
              value = c(85, 10, 15, 890)
)
result <- kk_confusion_matrix(cm_tibble)

# Example 3: Data frame input
cm_df <- data.frame(tp = 85, fp = 10, fn = 15, tn = 890)
result <- kk_confusion_matrix(cm_df)

# Example 4: With bootstrap confidence intervals
result_boot <- kk_confusion_matrix(
              c(tp = 85, fp = 10, fn = 15, tn = 890),
              boot = TRUE,
              B = 10000
)

# Example 5: Higher confidence level (99\%)
result_99 <- kk_confusion_matrix(
              c(tp = 85, fp = 10, fn = 15, tn = 890),
              conf = 0.99
)

# Example 6: Medical diagnostic test
# Disease prevalence: 10\%, Test sensitivity: 85\%, specificity: 98\%
# In a population of 1000:
test_result <- kk_confusion_matrix(c(
              tp = 85, # True positives (diseased, test+)
              fp = 18, # False positives (healthy, test+)
              fn = 15, # False negatives (diseased, test-)
              tn = 882 # True negatives (healthy, test-)
))
print(test_result)

# View key metrics
library(dplyr)
test_result \%>\%
              filter(metric \%in\% c(
                            "sensitivity (TPR)", "specificity (TNR)",
                            "PPV (precision)", "NPV"
              ))
}

}
